<% content_for(:title, t('.title')) %>

<div class="d-flex justify-content-between">
  <h1 class="h4"><%= t('.title') %></h1>
  <%= button_to "Log out", Current.session, method: :delete, data: { controller: "bridge--nav-button", bridge_title: "Log out", 'turbo-confirm': t('message_destroy') }, class: 'btn btn-danger hide-on-mobile' %>
</div>

<div class="card-body text-center">
  <div>
    <%= render "avatar_form", user: @user %>
  </div>

  <h6 class="card-subtitle mb-2 text-muted"><i class="bi bi-envelope-fill me-1"></i><%= @user.email %></h6>
  <h6 class="card-subtitle mb-2 text-muted"><i class="bi bi-person-fill me-1"></i><%= @user.name %></h6>
  <h6 class="card-subtitle mb-2 text-warning"><small>@ </small><%= @user.handle %></h6>
</div>

<div class="d-flex flex-wrap gap-2 mb-3">
  <div class="card shadow-sm bg-body-tertiary rounded flex-fill" style="min-width: 300px;">
      <div class="card-header border-bottom-0">
          <h2 class="h6 fw-bold mb-0">
              <i class="bi bi-person-gear me-3 text-primary"></i><%= t('.identity.title') %>
          </h2>
      </div>

      <div class="list-group list-group-flush rounded-bottom">
        <%= link_to edit_identity_profile_path(@user), class: "list-group-item list-group-item-action d-flex align-items-center" do %>
            <i class="bi bi-person-lines-fill me-3 text-muted"></i><%= t('.identity.edit_profile') %>
        <% end %>

        <% if @user.healthy_metric.present? %>
          <%= link_to identity_healthy_metric_path(@user.healthy_metric), class: "list-group-item list-group-item-action d-flex align-items-center" do %>
              <i class="bi bi-calculator-fill me-3 text-muted"></i><%= t('.identity.show') %>
          <% end %>
        <% else %>
          <%= link_to new_identity_healthy_metric_path, class: "list-group-item list-group-item-action d-flex align-items-center" do %>
              <i class="bi bi-calculator-fill me-3 text-muted"></i><%= t('.identity.add') %>
          <% end %>
        <% end %>
      </div>
  </div>

  <div class="card shadow-sm bg-body-tertiary rounded flex-fill" style="min-width: 300px;">
      <div class="card-header bg-transparent border-bottom-0">
          <h2 class="h6 fw-bold mb-0">
          <i class="bi bi-gear me-2 text-primary"></i><%= t('.settings.title') %>
          </h2>
      </div>
      <div class="list-group list-group-flush rounded-bottom">
          <%= link_to edit_password_path, class: "list-group-item list-group-item-action d-flex align-items-center" do %>
              <i class="bi bi-key me-3 text-muted"></i><%= t('.settings.change_password') %>
          <% end %>
          <%= link_to edit_identity_email_path, class: "list-group-item list-group-item-action d-flex align-items-center" do %>
              <i class="bi bi-envelope me-3 text-muted"></i><%= t('.settings.change_email') %>
          <% end %>
      </div>
  </div>
</div>

<div class="card shadow-sm mb-3 bg-body-tertiary rounded">
    <div class="card-header bg-transparent border-bottom-0">
        <h3 class="h6 fw-bold mb-0">
        <i class="bi bi-pc-display me-2 text-primary"></i><%= t('.session.title') %>
        </h3>
    </div>
    <div class="list-group list-group-flush rounded-bottom">
        <%= link_to sessions_path, class: "list-group-item list-group-item-action d-flex align-items-center" do %>
        <i class="bi bi-clock-history me-3 text-muted"></i><%= t('.session.collection_sessions') %>
        <% end %>
    </div>
</div>

<div class="card shadow-sm mb-4 border rounded-3 mb-5">
    <div class="card-header bg-transparent border-bottom-0 d-flex justify-content-between align-items-center">
        <h3 class="h6 fw-bold mb-0">
            <i class="bi bi-translate me-2 text-primary"></i><%= t('language') %>
        </h3>
        <div class="dropdown">
            <button class="btn btn-sm dropdown-toggle" type="button" id="languageButton" data-bs-toggle="dropdown">
                <%= I18n.locale == :en ? t('languages.en') : t('languages.pt') %>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
                <li><%= link_to t('languages.en'), set_locale_path('en'), data: { turbo_frame: "_top" }, class: 'dropdown-item' %></li>
                <li><%= link_to t('languages.pt'), set_locale_path('pt'), data: { turbo_frame: "_top" }, class: 'dropdown-item' %></li>
            </ul>
        </div>
    </div>
</div>

<%= render 'shared/theme_toggle' if turbo_native_app? %>
