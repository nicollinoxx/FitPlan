<h1><%= t('.title') %></h1>

<%= form_with url: new_shares_shared_sheet_path, method: :get, local: true do %>
  <div class="mb-3">
    <label class="form-label">Search user:</label>
    <div class="input-group">
      <span class="input-group-text">@</span>
      <%= text_field_tag :handle, params[:handle], class: "form-control", placeholder: "handle do usuÃ¡rio", onchange: "this.form.requestSubmit();" %>
    </div>
  </div>
<% end %>

<% if @recipient.present? %>
  <div class="d-flex align-items-center  p-2 mb-3">
    <% if @recipient.avatar.attached? %>
      <%= image_tag @recipient.avatar, class: "rounded-circle me-2", width: 40, height: 40 %>
    <% else %>
      <%= image_tag "avatar.png", class: "rounded-circle", width: 40, height: 40 %>
    <% end %>
    <p class="text-success m-0"><%= @recipient.username %></p>
  </div>

  <%= form_with url: shares_shared_sheets_path(handle: @recipient.handle), method: :post, local: true do |form| %>
    <div class="mb-3">
      <label class="form-label">Fichas para compartilhar:</label>
      <%= select_tag "sheet_ids[]", options_from_collection_for_select(@sheets, :id, :name), multiple: true, class: "form-select", size: 5 %>
    </div>

    <div class="d-flex gap-2">
      <%= form.submit "Compartilhar", class: "btn btn-primary" %>
      <%= link_to "Cancelar", root_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
<% end %>
